{"version":3,"sources":["App/shared/img/VespaIcon.png","App/shared/img/VespaLogoWhite.png","App/shared/components/Link.js","App/shared/components/NavMenu.js","App/shared/components/SearchForm.js","App/Search/Utils.js","App/shared/components/Footer.js","App/Main.js","App/shared/utils/formatter.js","App/Search/ResultCard.js","App/Search/Sidebar.js","App/shared/components/Messages.js","App/shared/Fetcher.js","App/Search/SearchOptions.js","App/shared/components/Pagination.js","App/Search/index.js","App/Article/index.js","App/shared/components/Error.js","App/index.js","serviceWorker.js","index.js"],"names":["module","exports","Link","to","props","href","children","startsWith","target","rel","Header","styled","Box","NavBar","Menu","logo","items","content","Nav","secondary","inverted","fluid","Item","header","fitted","Mobile","Responsive","onlyMobile","position","Dropdown","item","icon","trigger","Icon","name","map","idx","key","Desktop","minWidth","onlyTablet","NavMenu","sx","paddingLeft","paddingRight","width","Container","StyledSearchForm","Form","SearchForm","onSearch","query","useState","currentQuery","setCurrentQuery","useEffect","handleSearch","onSubmit","Input","link","onClick","placeholder","className","onChange","e","value","relatedToRegex","select","split","s","trim","join","orCombiner","field","array","range","length","timestampStartOfYearUtc","year","Date","UTC","params","urlParams","URLSearchParams","window","location","search","Object","entries","delete","Array","isArray","forEach","v","append","set","hasOwnProperty","next","done","navigate","getRelatedId","get","match","getSearchState","journal","getAll","source","author","has_full_text","ranking","fieldset","relatedId","FooterBox","page","Footer","Segment","Group","horizontal","size","basic","textAlign","Image","src","sampleQueries","Content","ContentGrid","Grid","SearchSuggestions","List","shuffle","slice","i","encodeURIComponent","VespaDescription","my","VespaIcon","centered","mt","Main","verticalAlign","Column","nameFormatter","first","middle","last","matches","filter","StyledCard","Card","ExplanationIcon","highlightRegex","formatText","text","replace","r","FunctionLink","preventDefault","Explanation","Popup","JournalAndDate","timestamp","format","unix","utc","DoiLink","doi","SourceAndCitations","citations_count_total","showCitations","AuthorsList","authors","showAll","setShowAll","limit","ResultCard","fields","id","title","abstract","abstract_t5","body_text","onSearchSimilar","isFieldSetAll","body","plainTitle","Meta","Label","filters","PaddedCheckbox","Checkbox","Checkboxes","values","event","checked","selected","oValue","oChecked","Field","count","label","Sidebar","filterValues","noneChecked","flatMap","find","c","style","backgroundColor","Button","disabled","reduce","obj","Loading","message","Message","Error","error","backend","process","REACT_APP_BACKEND_URL","Get","url","Fetch","method","reducer","state","action","credentials","fetcher","fetch","then","response","ok","json","JSON","parse","Promise","reject","code","status","contentType","headers","returnRaw","includes","isCanceled","promise","versionArg","version","initialState","loading","cancel","useReducer","dispatch","catch","div","fieldsets","rankings","RelatedArticle","toString","hits","root","SearchOptions","totalCount","inline","defaultValue","options","flds","rnk","Center","Pagination","total","offset","onOffsetChange","numPerPage","totalPages","Math","min","floor","firstItem","lastItem","prevItem","nextItem","defaultActivePage","onPageChange","activePage","ContainerSearch","appendRelatedToQuery","NoMatches","SearchResults","articles","article","Search","searchState","timestampRanges","y","parseInt","q","generateApiQueryParams","grouping","setGrouping","sort","id1","relevance","rev1","id2","rev2","groupingResponse","valuesState","Fragment","ContainerContent","Authors","Subheader","license","date","as","Related","console","log","Tab","Pane","CitedBy","citedBy","Citation","Article","URL","citations","uniq","cited_by","citations_inbound","source_id","isNaN","panes","menuItem","render","searchParams","defaultActiveIndex","onTabChange","tabInfo","keys","k","activeIndex","Title","h2","ErrorGrid","getMessage","Row","App","flexDirection","minHeight","primary","component","React","path","default","Boolean","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2372f0b7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/VespaIcon.aefa1e1f.png\";","module.exports = __webpack_public_path__ + \"static/media/VespaLogoWhite.2fad86a7.png\";","import React from 'react';\nimport { Link as InternalLink } from '@reach/router';\n\nfunction Link({ to, ...props }) {\n  if ('download' in props)\n    return (\n      <a {...props} href={to}>\n        {props.children}\n      </a>\n    );\n  if (to && !to.startsWith('http') && !to.startsWith('/api/'))\n    return <InternalLink to={to} {...props} />;\n  return (\n    <a target=\"_blank\" rel=\"noopener noreferrer\" {...props} href={to}>\n      {props.children}\n    </a>\n  );\n}\n\nexport default Link;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Box } from 'rebass';\nimport { Menu, Container, Responsive, Icon, Dropdown } from 'semantic-ui-react';\nimport Link from 'App/shared/components/Link';\n\nconst Header = styled(Box)`\n  background-color: #005a8e;\n  border-bottom: 2px solid rgba(255, 255, 255, 0.2);\n  a {\n    cursor: pointer;\n    font-weight: 600;\n  }\n`;\n\nconst NavBar = styled(Menu)`\n  &&& {\n    height: 64px;\n    margin: 0;\n\n    border-bottom: 1px solid rgba(63, 157, 216, 0.25);\n\n    .item.header {\n      font-weight: bold;\n      font-size: 1.4em;\n    }\n\n    .item,\n    .item > a,\n    .item > a:not(.ui) {\n      color: white;\n      font-weight: bold;\n    }\n\n    .item > a:hover {\n      color: #ffc43c;\n    }\n\n    .item:last-child {\n      padding-right: 0 !important;\n      margin-right: 0 !important;\n    }\n\n    .ui.image {\n      width: 100px;\n    }\n\n    span {\n      color: #ffc43c;\n    }\n\n    .dropdown.item .menu {\n      background: #005a8e;\n      box-shadow: none;\n    }\n  }\n`;\n\nconst logo = (\n  <Link to=\"/\">\n    <span>CORD-19</span> Search and Navigate\n  </Link>\n);\n\nconst items = [\n  {\n    content: (\n      <Link to=\"https://github.com/vespa-engine/cord-19/blob/master/cord-19-queries.md\">\n        API\n      </Link>\n    ),\n  },\n  {\n    content: (\n      <Link to=\"https://github.com/vespa-engine/cord-19/blob/master/README.md\">\n        Open source\n      </Link>\n    ),\n  },\n  {\n    content: (\n      <Link to=\"https://github.com/vespa-engine/cord-19/blob/master/README.md#Contact\">\n        Contact us\n      </Link>\n    ),\n  },\n];\n\nfunction Nav({ children }) {\n  return (\n    <NavBar secondary inverted fluid>\n      <Menu.Item header fitted>\n        {logo}\n      </Menu.Item>\n      {children}\n    </NavBar>\n  );\n}\n\nfunction Mobile() {\n  return (\n    <Responsive {...Responsive.onlyMobile}>\n      <Nav>\n        <Menu.Menu position=\"right\">\n          <Dropdown item icon={null} trigger={<Icon name=\"bars\" />}>\n            <Dropdown.Menu items={items}>\n              {items.map((item, idx) => (\n                <Dropdown.Item key={idx} {...item} />\n              ))}\n            </Dropdown.Menu>\n          </Dropdown>\n        </Menu.Menu>\n      </Nav>\n    </Responsive>\n  );\n}\nfunction Desktop() {\n  return (\n    <Responsive minWidth={Responsive.onlyTablet.minWidth}>\n      <Nav>\n        <Menu.Menu position=\"right\">\n          {items.map((item, idx) => (\n            <Menu.Item key={idx} {...item} />\n          ))}\n        </Menu.Menu>\n      </Nav>\n    </Responsive>\n  );\n}\n\nfunction NavMenu() {\n  return (\n    <Header sx={{ paddingLeft: '0px', paddingRight: '0px' }} width={1}>\n      <Container>\n        <Desktop />\n        <Mobile />\n      </Container>\n    </Header>\n  );\n}\n\nexport default NavMenu;\n","import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Form, Icon } from 'semantic-ui-react';\n\nconst StyledSearchForm = styled(Form)`\n  &&& {\n    font-size: 1.1rem;\n    margin: 0 auto;\n\n    input[type='text'] {\n      border-radius: 1.3rem;\n    }\n  }\n`;\n\nfunction SearchForm({ onSearch, query = '' }) {\n  const [currentQuery, setCurrentQuery] = useState(query);\n  useEffect(() => {\n    if (query !== currentQuery) setCurrentQuery(query);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [query]);\n  const handleSearch = () => onSearch({ query: currentQuery });\n\n  return (\n    <StyledSearchForm onSubmit={handleSearch}>\n      <Form.Input\n        fluid\n        icon={<Icon name=\"search\" link onClick={handleSearch} />}\n        placeholder=\"Search...\"\n        className=\"input\"\n        onChange={(e, { value }) => setCurrentQuery(value)}\n        value={currentQuery}\n      />\n    </StyledSearchForm>\n  );\n}\n\nexport default SearchForm;\n","import { navigate } from '@reach/router';\n\nconst relatedToRegex = /(?:^|\\s)(\\+?related_to:[0-9]+)(?:$|\\s)/;\n\nconst select = `all(\n     all(group(source) order(-count()) each(output(count())))\n     all(group(journal) max(10) order(-count()) each(output(count())))\n     all(group(authors.name) max(10) order(-count()) each(output(count())) as(author))\n     all(group(time.year(timestamp)) max(10) order(-count()) each(output(count())) as(year))\n     all(group(has_full_text) each(output(count())))\n   )`\n  .split('\\n')\n  .map(s => s.trim())\n  .join('');\n\n// Combines an array of possible values for a given field into an OR expression that is ANDed with other filters\nconst orCombiner = (field, array, range = false) =>\n  array.length\n    ? '+(' +\n      array\n        .map(s => (range ? `${field}:[${s}]` : `${field}:\"${s}\"`))\n        .join(' ') +\n      ')'\n    : null;\n\nconst timestampStartOfYearUtc = year => Date.UTC(year, 0, 1) / 1000;\n\nconst generateApiQueryParams = () => {\n  const { journal, source, year, author, has_full_text } = getSearchState();\n  const timestampRanges = year\n    .map(y => parseInt(y))\n    .map(\n      y =>\n        timestampStartOfYearUtc(y) + ';' + (timestampStartOfYearUtc(y + 1) - 1)\n    );\n  const filter = [\n    orCombiner('journal', journal),\n    orCombiner('source', source),\n    orCombiner('timestamp', timestampRanges, true),\n    orCombiner('authors.name', author),\n    orCombiner('has_full_text', has_full_text),\n  ]\n    .filter(s => s)\n    .join(' ');\n\n  const query = new URLSearchParams(window.location.search);\n  const ranking = query.get('ranking');\n  const fieldset = query.get('fieldset');\n  // Remove query parameters used in the UI, these are either sent to backend under a different name\n  // or as part of an expression (filters)\n  [\n    'journal',\n    'source',\n    'year',\n    'author',\n    'has_full_text',\n    'ranking',\n    'fieldset',\n  ].forEach(q => query.delete(q));\n  if (filter) query.set('filter', filter);\n  if (ranking) query.set('ranking.profile', ranking);\n  if (fieldset) query.set('model.defaultIndex', fieldset);\n  query.set('select', select);\n\n  return query;\n};\n\nconst onSearch = params => {\n  const urlParams = new URLSearchParams(window.location.search);\n\n  for (let [key, value] of Object.entries(params)) {\n    urlParams.delete(key);\n    if (Array.isArray(value)) value.forEach(v => urlParams.append(key, v));\n    else if (value) urlParams.set(key, value);\n  }\n  // Offset must be reset whenever result set changes, which we assume may be\n  // every time the URL changes due to other interactions than with pagination.\n  if (!params.hasOwnProperty('offset')) urlParams.delete('offset');\n\n  // No query or filters specified\n  if (urlParams.entries().next().done) return;\n  navigate('/search?' + urlParams);\n};\n\nconst getRelatedId = urlParams => {\n  const query = urlParams.get('query');\n  if (!query) return null;\n  const match = query.match(relatedToRegex);\n  if (!match) return null;\n  return match[1].split(':')[1];\n};\n\nconst getSearchState = () => {\n  const urlParams = new URLSearchParams(window.location.search);\n\n  return {\n    query: urlParams.get('query') || '',\n    journal: urlParams.getAll('journal'),\n    source: urlParams.getAll('source'),\n    year: urlParams.getAll('year'),\n    author: urlParams.getAll('author'),\n    has_full_text: urlParams.getAll('has_full_text'),\n    ranking: urlParams.get('ranking'),\n    fieldset: urlParams.get('fieldset'),\n    relatedId: getRelatedId(urlParams),\n  };\n};\n\nexport { generateApiQueryParams, getSearchState, onSearch, relatedToRegex };\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Box } from 'rebass';\nimport Link from 'App/shared/components/Link';\nimport { Segment, Image } from 'semantic-ui-react';\nimport logo from 'App/shared/img/VespaLogoWhite.png';\nimport { Container } from 'semantic-ui-react';\n\nconst FooterBox = styled(Box)`\n  &&& {\n    width: 100%;\n    margin: auto 0 0;\n    background-color: ${({ page }) =>\n      page === 'main' ? 'transparent' : '#005a8e'};\n\n    .ui {\n      margin: 0;\n      border: 0;\n      color: white;\n      box-shadow: none;\n    }\n\n    .ui.segment {\n      padding: 1em 0em;\n    }\n\n    .ui.segment.sides {\n      width: 200px;\n      padding: 0;\n    }\n\n    a {\n      font-weight: bold;\n      color: white;\n    }\n\n    a:hover {\n      color: #ffc43c;\n    }\n\n    .ui.image {\n      width: 100px;\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      right: 0px;\n      margin: auto;\n    }\n  }\n`;\n\nfunction Footer({ page = null }) {\n  return (\n    <FooterBox page={page}>\n      <Container>\n        <Segment.Group horizontal size=\"small\">\n          <Segment basic textAlign={page === 'main' ? 'center' : 'left'}>\n            <Link to=\"https://pages.semanticscholar.org/coronavirus-research\">\n              COVID-19 Open Research Dataset (CORD-19)\n            </Link>\n            . 2020. Version 2020-04-10. Accessed 2020-04-11.{' '}\n            <Link to=\"https://doi.org/10.5281/zenodo.3727291\">\n              doi:10.5281/zenodo.3727291\n            </Link>\n            <br />\n            Copyright Verizon Media 2020 Licensed under{' '}\n            <Link to=\"https://github.com/vespa-engine/cord-19/blob/master/LICENSE\">\n              Apache License 2.0\n            </Link>\n          </Segment>\n          {page !== 'main' && (\n            <Segment className=\"sides\" basic>\n              <Link to=\"https://vespa.ai\">\n                <Image src={logo} />\n              </Link>\n            </Segment>\n          )}\n        </Segment.Group>\n      </Container>\n    </FooterBox>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Box, Text } from 'rebass';\nimport { Grid, List, Image } from 'semantic-ui-react';\nimport { shuffle } from 'lodash';\nimport SearchForm from 'App/shared/components/SearchForm';\nimport Link from 'App/shared/components/Link';\nimport { onSearch } from './Search/Utils';\nimport VespaIcon from 'App/shared/img/VespaIcon.png';\nimport Footer from 'App/shared/components/Footer';\n\nconst sampleQueries = [\n  '+covid-19 +temperature impact on viral transmission',\n  'basic reproduction numbers for covid-19 in +\"south korea\"',\n  'Impact of school closure to handle COVID-19 pandemic',\n  '+title:\"reproduction number\" +abstract:MERS',\n  '+authors.name:\"Neil M Ferguson\"',\n  '+(\"SARS-COV-2\" \"coronavirus 2\" \"novel coronavirus\")',\n  '+chloroquine +(covid-19 coronavirus)',\n];\n\nconst Content = styled(Box)`\n  background-image: linear-gradient(0deg, #98c1db 7%, #005a8e 100%);\n  min-height: calc(100vh - 66px);\n`;\n\nconst ContentGrid = styled(Grid)`\n  &&& {\n    min-height: calc(100vh - 130px);\n    color: white;\n    font-size: 1.1rem;\n    margin-top: 0;\n\n    .column {\n      padding: 0;\n    }\n\n    h1 {\n      font-size: 3.5rem;\n      font-weight: 300;\n    }\n\n    h4 {\n      font-size: 1.1rem;\n      margin: 3rem 0 0;\n    }\n\n    & .ui.list {\n      margin: 0.5rem 0;\n    }\n\n    .ui.form {\n      max-width: 800px;\n      padding: 0 2rem;\n    }\n\n    a {\n      color: #b3e5fc !important;\n      font-weight: 600;\n      font-weight: normal;\n    }\n\n    a:hover {\n      color: #ffc43c !important;\n    }\n  }\n`;\n\nfunction SearchSuggestions() {\n  return (\n    <>\n      <h4>Try searching for...</h4>\n      <List>\n        {shuffle(sampleQueries)\n          .slice(0, 3)\n          .map((query, i) => (\n            <List.Item key={i}>\n              <Link to={'/search?query=' + encodeURIComponent(query)}>\n                {query}\n              </Link>\n            </List.Item>\n          ))}\n      </List>\n    </>\n  );\n}\n\nfunction VespaDescription() {\n  return (\n    <Box my={4}>\n      <Image src={VespaIcon} size=\"tiny\" centered />\n      <Text mt={3}>\n        This is an{' '}\n        <Link to=\"https://github.com/vespa-engine/cord-19/blob/master/README.md\">\n          open source application{' '}\n        </Link>\n        on <Link to=\"https://vespa.ai\">Vespa.ai</Link>\n      </Text>\n      <Text mt={1}>The big data serving engine.</Text>\n    </Box>\n  );\n}\n\nfunction Main() {\n  return (\n    <Content width={1}>\n      <ContentGrid verticalAlign=\"middle\" textAlign=\"center\">\n        <Grid.Column>\n          <h1 size=\"huge\">CORD-19 Search</h1>\n          <SearchForm onSearch={onSearch} />\n          <SearchSuggestions />\n          <VespaDescription />\n        </Grid.Column>\n      </ContentGrid>\n      <Footer page=\"main\" />\n    </Content>\n  );\n}\n\nexport default Main;\n","export function nameFormatter({ first, middle, last }) {\n  if (!last) return first || middle;\n  const matches = [first, middle]\n    .filter(s => s)\n    .join(' ')\n    .match(/(?:(?=^|\\s)(\\w)|([A-Z]))/g);\n  return (matches ? matches.join('') + ' ' : '') + last;\n}\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { Card, Icon, Label, Popup } from 'semantic-ui-react';\nimport Moment from 'react-moment';\nimport Link from 'App/shared/components/Link';\nimport { nameFormatter } from 'App/shared/utils/formatter';\n\nconst StyledCard = styled(Card)`\n  && {\n    box-shadow: none;\n    margin-bottom: 2em;\n\n    a {\n      color: #005a8e;\n    }\n\n    a:hover {\n      color: #1a7db6;\n    }\n  }\n\n  &.card {\n    width: 100%;\n  }\n\n  .header {\n    font-weight: bold;\n    padding: 5px;\n  }\n\n  &.card .meta {\n    font-size: 0.9em;\n    padding: 0 0.5em;\n    color: rgba(48, 48, 48, 0.5);\n\n    a.doi {\n      float: right;\n    }\n  }\n\n  .meta:after {\n    content: '';\n    display: table;\n    clear: both;\n  }\n\n  && .content {\n    padding: 0.3em 0.5em;\n    border: 0;\n  }\n`;\n\nconst ExplanationIcon = styled(Icon)`\n  &&.icon {\n    margin: 0 0 0 0.5em;\n  }\n`;\n\nconst highlightRegex = /<hi>(.*?)<\\/hi>/g;\nconst formatText = text => {\n  if (!text) return null;\n  return (\n    text\n      .replace(/<sep \\/>/g, 'â€¦')\n      .split(highlightRegex)\n      // The highlighted sections will be every other element starting at 1, wrap these in bold while keep others as strings\n      .map((r, i) => (i % 2 === 0 ? r : <b key={i}>{r}</b>))\n  );\n};\n\n// Link which has a dummy target which is ignored, only triggers the onClick callback\nconst FunctionLink = ({ onClick, ...props }) => (\n  <a\n    href=\"#root\"\n    onClick={e => {\n      e.preventDefault();\n      onClick();\n    }}\n  >\n    {props.children}\n  </a>\n);\n\nfunction Explanation({ text }) {\n  return (\n    <Popup\n      content={text}\n      trigger={\n        <span>\n          <ExplanationIcon name=\"question circle\" />\n        </span>\n      }\n    />\n  );\n}\n\nfunction JournalAndDate({ journal, timestamp }) {\n  const format = journal ? ' (YYYY-MM-DD)' : 'YYYY-MM-DD';\n  return (\n    <>\n      {journal && (\n        <>\n          <b>Journal:</b> {journal}\n        </>\n      )}\n      {timestamp > 0 ? (\n        <Moment format={format} unix utc>\n          {timestamp * 1000}\n        </Moment>\n      ) : null}\n    </>\n  );\n}\n\nfunction DoiLink({ doi }) {\n  if (!doi) return null;\n  return (\n    <Link className=\"ui doi\" to={doi}>\n      {doi.replace('https://doi.org/', 'doi:')}\n    </Link>\n  );\n}\n\nfunction SourceAndCitations({ source, citations_count_total }) {\n  const showCitations = citations_count_total > 0;\n  if (!source && !showCitations) return null;\n  return (\n    <div>\n      {source && (\n        <>\n          <b>Source: </b>\n          {source}\n        </>\n      )}\n      {source && showCitations && <>, </>}\n      {showCitations && (\n        <>\n          <b>Citations: </b>\n          {citations_count_total}\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction AuthorsList({ authors }) {\n  const [showAll, setShowAll] = useState(false);\n\n  if (!authors) return null;\n  const limit = showAll || authors.length < 12 ? authors.length : 10;\n  return (\n    <div>\n      <b>Authors: </b>\n      {authors\n        .map(nameFormatter)\n        .slice(0, limit)\n        .join(', ')}\n      {limit < authors.length ? (\n        <>\n          {' '}\n          <FunctionLink onClick={() => setShowAll(true)}>\n            and {authors.length - limit} more\n          </FunctionLink>\n        </>\n      ) : null}\n    </div>\n  );\n}\n\nfunction ResultCard({\n  fields: {\n    id,\n    title,\n    timestamp,\n    journal,\n    doi,\n    abstract,\n    abstract_t5,\n    body_text,\n    authors,\n    source,\n    citations_count_total,\n  },\n  onSearchSimilar,\n  isFieldSetAll,\n}) {\n  const content = formatText(abstract);\n  const body = formatText(body_text);\n  const plainTitle = title.replace(highlightRegex, '$1');\n  return (\n    <StyledCard>\n      <Card.Header>\n        <Link to={`/article/${id}`}>{plainTitle}</Link>\n      </Card.Header>\n      <Card.Meta>\n        <JournalAndDate {...{ journal, timestamp }} />\n        <DoiLink doi={doi} />\n        <SourceAndCitations {...{ source, citations_count_total }} />\n        <AuthorsList authors={authors} />\n      </Card.Meta>\n      {(content || onSearchSimilar) && (\n        <Card.Content>\n          {content && (\n            <div>\n              <Popup\n                position=\"top center\"\n                content=\"This is a dynamic summary of the abstract of the paper, showing the matched query terms and surrounding context.\"\n                trigger={<Label horizontal>Abstract</Label>}\n              />\n              {content}\n            </div>\n          )}\n          {body && (\n            <div>\n              <Popup\n                position=\"top center\"\n                content=\"This is a dynamic summary of the body of the paper, showing the matched query terms and surrounding context.\"\n                trigger={<Label horizontal>Full Text</Label>}\n              />\n              {body}\n            </div>\n          )}\n          {abstract_t5 && (\n            <div>\n              <Label horizontal>\n                Machine Generated Summary\n                <Explanation text=\"This is a short summary of the abstract, generated using a Natural Language Processing Model (T5).\" />\n              </Label>\n              {formatText(abstract_t5)}\n            </div>\n          )}\n          {onSearchSimilar && (\n            <FunctionLink onClick={onSearchSimilar}>\n              Search for similar articles\n            </FunctionLink>\n          )}\n        </Card.Content>\n      )}\n    </StyledCard>\n  );\n}\n\nexport default ResultCard;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Button, Checkbox, Form } from 'semantic-ui-react';\n\nconst filters = [\n  { name: 'Source', field: 'source' },\n  {\n    name: 'Journal',\n    field: 'journal',\n  },\n  {\n    name: 'Published',\n    field: 'year',\n  },\n  {\n    name: 'Author',\n    field: 'author',\n  },\n  {\n    name: 'Full text',\n    field: 'has_full_text',\n  },\n];\n\nconst PaddedCheckbox = styled(Checkbox)`\n  && {\n    display: block;\n    padding: 2px;\n    font-size: 0.9em;\n    label {\n      color: #303030;\n    }\n  }\n`;\n\nfunction Checkboxes({ name, field, values, onSearch }) {\n  if (!values || values.length === 0) return null;\n  const onChange = (event, { value, checked }) => {\n    // The new selected checkboxes are the ones that were previously selected\n    // and the current value of the checkbox that triggered the event\n    const selected = values\n      .filter(({ value: oValue, checked: oChecked }) =>\n        oValue === value ? checked : oChecked\n      )\n      .map(({ value: oValue }) => oValue);\n    onSearch({ [field]: selected });\n  };\n\n  return (\n    <Form.Field>\n      <label>{name}</label>\n      {values\n        .filter(\n          ({ value }) =>\n            value.length > 0 && !(field === 'year' && value === '1970')\n        )\n        .map(({ value, count, checked }, i) => (\n          <PaddedCheckbox\n            key={i}\n            name={name}\n            value={value}\n            onChange={onChange}\n            label={`${value} (${count})`}\n            checked={checked}\n          />\n        ))}\n    </Form.Field>\n  );\n}\n\nfunction Sidebar({ onSearch, ...filterValues }) {\n  const noneChecked =\n    Object.values(filterValues)\n      .flatMap(values => values.map(({ checked }) => checked))\n      .find(c => c) !== true;\n  return (\n    <div\n      id=\"sidebar\"\n      className=\"ui form\"\n      style={{ backgroundColor: '#e6eff5' }}\n    >\n      <Button\n        disabled={noneChecked}\n        onClick={() =>\n          onSearch(\n            filters.reduce((obj, { field }) => ({ ...obj, [field]: [] }), {})\n          )\n        }\n      >\n        Clear all\n      </Button>\n      {filters.map(({ name, field }) => (\n        <Checkboxes\n          key={field}\n          name={name}\n          field={field}\n          values={filterValues[field]}\n          onSearch={onSearch}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default Sidebar;\n","/**\n * Component to encapsulate messages that should be displayed on page (typically in place of something\n * else if it failed to load)\n */\nimport React from 'react';\nimport { Message, Segment } from 'semantic-ui-react';\nimport styled from 'styled-components';\n\nconst Container = styled(Segment)`\n  &&& {\n    width: 100%;\n    margin: 0;\n    .ui.message {\n      background: transparent;\n      box-shadow: none;\n    }\n    .ui.warning.message {\n      background: #fffaf3;\n    }\n    .ui.error.message {\n      background: #fff6f6;\n    }\n  }\n`;\n\nconst Loading = ({ header, message }) => (\n  <Container basic textAlign={'center'}>\n    <Message>\n      {header && <Message.Header>{header}</Message.Header>}\n      <Message.Content>{message}</Message.Content>\n    </Message>\n  </Container>\n);\n\nconst Warning = ({ header, message }) => (\n  <Container basic textAlign={'center'}>\n    <Message warning>\n      {header && <Message.Header>{header}</Message.Header>}\n      <Message.Content>{message}</Message.Content>\n    </Message>\n  </Container>\n);\n\nconst Error = ({ header, message }) => (\n  <Container basic textAlign={'center'}>\n    <Message error>\n      {header && <Message.Header>{header}</Message.Header>}\n      <Message.Content>{message}</Message.Content>\n    </Message>\n  </Container>\n);\n\nexport { Loading, Warning, Error };\n","import { useReducer } from 'react';\n\nconst backend =\n  process.env.REACT_APP_BACKEND_URL || 'https://api.cord19.vespa.ai';\n\nfunction Get(url, params) {\n  return Fetch('GET', url, params);\n}\n\nfunction Post(url, params) {\n  return Fetch('POST', url, params);\n}\n\nfunction Put(url, params) {\n  return Fetch('PUT', url, params);\n}\n\nfunction Patch(url, params) {\n  return Fetch('PATCH', url, params);\n}\n\nfunction Delete(url, params) {\n  return Fetch('DELETE', url, params);\n}\n\nfunction Fetch(method, url, params) {\n  function reducer(state, action) {\n    return { ...state, ...action };\n  }\n\n  if (!url.startsWith('http')) url = backend + url;\n\n  params = params || {};\n  params.method = method;\n  params.credentials = 'same-origin'; //Not default for all browsers yet\n\n  const fetcher = () =>\n    fetch(url, params)\n      // Reject promise if response is not OK\n      .then(response => {\n        if (response.ok) return response;\n\n        return response.text().then(text => {\n          let message = text;\n          try {\n            const json = JSON.parse(text);\n            if ('message' in json) message = json.message;\n          } catch (e) {\n            // not JSON\n          }\n          return Promise.reject({ message, code: response.status });\n        });\n      })\n\n      // automatically return the data if it's a known content type\n      .then(response => {\n        const contentType = response.headers.get('content-type');\n        if (!contentType || params.returnRaw) return response;\n        if (contentType.includes('application/json')) {\n          return response.json();\n        } else if (contentType.includes('text/plain')) {\n          return response.text();\n        }\n        return response;\n      });\n\n  let isCanceled = false;\n  const useFetcher = versionArg => {\n    const version = versionArg || 0;\n    const initialState = {\n      url: url,\n      loading: null,\n      cancel: () => {\n        isCanceled = true;\n      },\n      response: null,\n      error: null,\n      version: version,\n    };\n\n    const [state, dispatch] = useReducer(reducer, initialState);\n\n    if (url !== state.url || version !== state.version) dispatch(initialState);\n\n    if (state.loading === null) {\n      dispatch({ loading: true });\n      fetcher()\n        .then(response => {\n          if (!isCanceled)\n            dispatch({\n              loading: false,\n              response: response,\n              version: version,\n            });\n        })\n        .catch(error => {\n          if (!isCanceled)\n            dispatch({ loading: false, error: error, version: version });\n        });\n    }\n    return { ...state, loading: state.loading === null || state.loading };\n  };\n\n  return { promise: fetcher, state: useFetcher };\n}\n\nexport { Get, Post, Put, Patch, Delete };\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Dropdown } from 'semantic-ui-react';\nimport Link from 'App/shared/components/Link';\nimport { Error, Loading } from 'App/shared/components/Messages';\nimport { Get } from 'App/shared/Fetcher';\n\nconst Container = styled.div`\n  &&& {\n    margin: 0.32em;\n    > span {\n      float: right;\n    }\n  }\n`;\n\nconst fieldsets = [\n  {\n    text: 'title and abstract',\n    value: 'default',\n  },\n  {\n    text: 'title, abstract and full text',\n    value: 'all',\n  },\n];\n\nconst rankings = [\n  {\n    text: 'Vespa BM25',\n    value: 'bm25',\n  },\n  {\n    text: 'Vespa nativeRank',\n    value: 'default',\n  },\n  {\n    text: 'date',\n    value: 'freshness',\n  },\n];\n\nfunction RelatedArticle({ id }) {\n  const query = new URLSearchParams();\n  query.set('yql', `select title from sources * where id = ${id};`);\n  const { loading, response, error } = Get(\n    '/search/?' + query.toString()\n  ).state();\n\n  if (loading) return <Loading message=\"Loading...\" />;\n  if (error)\n    return <Error message={error.message || `Failed to load article #${id}`} />;\n\n  const hits = response?.root?.children;\n  if (!hits) return null;\n\n  return (\n    <Container>\n      Showing articles similar to{' '}\n      <Link to={`/article/${id}`}>{hits[0].fields.title}</Link>\n    </Container>\n  );\n}\n\nfunction SearchOptions({ totalCount, fieldset, ranking, onSearch, relatedId }) {\n  return (\n    <>\n      <Container>\n        {totalCount > 0 && (\n          <>\n            <b>{totalCount}</b> matches\n          </>\n        )}\n        <span>\n          Searching in{' '}\n          <Dropdown\n            inline\n            defaultValue={\n              fieldsets.find(\n                ({ value }, i) => fieldset === value || (!fieldset && i === 0)\n              ).value\n            }\n            options={fieldsets.map((flds, id) => ({ id, ...flds }))}\n            onChange={(event, { value }) => onSearch({ fieldset: value })}\n          />\n          {' and sorting by '}\n          <Dropdown\n            inline\n            defaultValue={\n              rankings.find(\n                ({ value }, i) => ranking === value || (!ranking && i === 0)\n              ).value\n            }\n            options={rankings.map((rnk, id) => ({ id, ...rnk }))}\n            onChange={(event, { value }) => onSearch({ ranking: value })}\n          />\n        </span>\n      </Container>\n      {relatedId && <RelatedArticle id={relatedId} />}\n    </>\n  );\n}\n\nexport default SearchOptions;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Pagination as SemanticPagination } from 'semantic-ui-react';\n\nconst Center = styled.div`\n  width: fit-content;\n  margin: 0 auto;\n`;\n\nfunction Pagination({ total, offset, onOffsetChange, numPerPage = 10 }) {\n  const totalPages = Math.min(\n    100,\n    Math.floor((total + numPerPage - 1) / numPerPage)\n  );\n\n  if (totalPages <= 1) return null;\n  return (\n    <Center>\n      <SemanticPagination\n        firstItem={null}\n        lastItem={null}\n        prevItem={null}\n        nextItem={null}\n        totalPages={totalPages}\n        defaultActivePage={1 + offset / numPerPage}\n        onPageChange={(e, { activePage }) =>\n          onOffsetChange((activePage - 1) * numPerPage)\n        }\n      />\n    </Center>\n  );\n}\n\nexport default Pagination;\n","import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Container } from 'semantic-ui-react';\nimport ResultCard from './ResultCard';\nimport Sidebar from './Sidebar';\nimport SearchOptions from './SearchOptions';\nimport {\n  generateApiQueryParams,\n  getSearchState,\n  onSearch,\n  relatedToRegex,\n} from './Utils';\nimport { Get } from 'App/shared/Fetcher';\nimport SearchForm from 'App/shared/components/SearchForm';\nimport { Error, Loading } from 'App/shared/components/Messages';\nimport Footer from 'App/shared/components/Footer';\nimport Pagination from 'App/shared/components/Pagination';\n\nconst ContainerSearch = styled(Container)`\n  &&& {\n    font-size: 1rem;\n    width: 100%;\n    margin: 0.5em auto 0;\n    padding: 1rem 0;\n    display: flex;\n\n    #sidebar {\n      width: 30%;\n      max-width: 250px;\n      height: fit-content;\n      margin-right: 1em;\n      padding: 0.5em;\n      border-radius: 0.28571429rem;\n\n      .ui.button {\n        width: calc(100% - 1em);\n        padding: 0.78125rem 0.4rem;\n        line-height: 1.4285em;\n        border-radius: 1.3rem;\n        margin: 0 0.5em 0.5em;\n        background: rgba(0, 90, 142, 0.1);\n        color: #3f9dd8;\n      }\n    }\n\n    #search_results {\n      flex: 1;\n      margin-top: 0.5em; // Must match #sidebar top padding\n    }\n\n    #no_matches {\n      text-align: center;\n      margin: 2rem;\n    }\n  }\n`;\n\nconst appendRelatedToQuery = (query, id) => {\n  return query.replace(relatedToRegex, ' ').trim() + ' related_to:' + id;\n};\n\nfunction NoMatches({ query }) {\n  return (\n    <div id=\"no_matches\">\n      <h1>Â¯\\_(ãƒ„)_/Â¯</h1>\n      <br />\n      No matches for <b>{query}</b>\n    </div>\n  );\n}\n\nfunction SearchResults({ articles, query, isFieldSetAll, loading, error }) {\n  if (loading) return <Loading message=\"Searching...\" />;\n  if (error)\n    return <Error message={error.message || 'Unknown search error...'} />;\n\n  if (articles.length === 0) return <NoMatches query={query} />;\n\n  return (\n    <>\n      {articles.map((article, i) => (\n        <ResultCard\n          key={i}\n          {...article}\n          isFieldSetAll={isFieldSetAll}\n          onSearchSimilar={() =>\n            onSearch({\n              query: appendRelatedToQuery(query, article.fields.id),\n            })\n          }\n        />\n      ))}\n    </>\n  );\n}\n\nfunction Search() {\n  const searchState = getSearchState();\n  const groupingId = 'group:root:0';\n  const query = generateApiQueryParams();\n  query.set('type', 'any');\n  query.set('summary', 'short');\n  query.set('restrict', 'doc');\n  query.set('hits', 10);\n\n  const { loading, response, error } = Get(\n    '/search/?' + query.toString()\n  ).state();\n  const [grouping, setGrouping] = useState();\n\n  // Sort results to make sure the grouping hit is first\n  const [groupingResponse, ...articles] = (\n    response?.root?.children || []\n  ).sort(({ id: id1, relevance: rev1 }, { id: id2, relevance: rev2 }) =>\n    id1 === groupingId ? -1 : id2 === groupingId ? 1 : rev2 - rev1\n  );\n\n  // Store grouping in own state so we can keep sidebar populated while making a new search\n  useEffect(() => {\n    if (loading) return;\n    setGrouping(groupingResponse);\n  }, [groupingResponse, setGrouping, loading]);\n\n  const totalCount = response?.root?.fields?.totalCount || 0;\n\n  // Combine grouping data with search state (search related query parameters, i.e. which filters have been enabled)\n  const valuesState = !grouping?.children\n    ? {}\n    : grouping.children.reduce((obj, { label, children }) => {\n        obj[label] = children.map(({ value, fields }) => ({\n          value,\n          count: fields['count()'],\n          checked: searchState[label].includes(value),\n        }));\n        return obj;\n      }, {});\n\n  return (\n    <React.Fragment>\n      <ContainerSearch>\n        <Sidebar onSearch={onSearch} {...valuesState} />\n        <div id=\"search_results\">\n          <SearchForm onSearch={onSearch} {...searchState} />\n          <SearchOptions\n            totalCount={totalCount}\n            onSearch={onSearch}\n            {...searchState}\n          />\n          <SearchResults\n            query={searchState.query}\n            isFieldSetAll={searchState.fieldset === 'all'}\n            {...{ articles, loading, error }}\n          />\n          <Pagination\n            total={totalCount}\n            offset={parseInt(query.get('offset')) || 0}\n            onOffsetChange={offset => onSearch({ offset })}\n          />\n        </div>\n      </ContainerSearch>\n      <Footer />\n    </React.Fragment>\n  );\n}\n\nexport default Search;\n","import React from 'react';\nimport styled from 'styled-components';\nimport Moment from 'react-moment';\nimport { navigate } from '@reach/router';\nimport { uniq } from 'lodash';\nimport { Container, Header, Tab, List } from 'semantic-ui-react';\nimport { Error, Loading } from 'App/shared/components/Messages';\nimport { Get } from 'App/shared/Fetcher';\nimport ResultCard from 'App/Search/ResultCard';\nimport Link from 'App/shared/components/Link';\nimport { nameFormatter } from 'App/shared/utils/formatter';\nimport Pagination from 'App/shared/components/Pagination';\nimport Footer from 'App/shared/components/Footer';\n\nconst ContainerContent = styled(Container)`\n  &&& {\n    margin-top: 1rem;\n    margin-bottom: 1rem;\n  }\n`;\n\nfunction Authors({ authors }) {\n  if (!authors) return null;\n  return (\n    <Header.Subheader>{authors.map(nameFormatter).join(', ')}</Header.Subheader>\n  );\n}\n\nfunction Meta({ journal, timestamp, source, license, doi }) {\n  const format = journal ? ' (YYYY-MM-DD)' : 'YYYY-MM-DD';\n  const date = timestamp ? (\n    <Moment format={format} unix utc>\n      {timestamp * 1000}\n    </Moment>\n  ) : null;\n\n  return (\n    <List>\n      {doi && (\n        <List.Item>\n          <List.Header>Doi</List.Header>\n          <Link to={doi}>{doi.replace('https://doi.org/', '')}</Link>\n        </List.Item>\n      )}\n      {journal ? (\n        <List.Item>\n          <List.Header>Journal</List.Header>\n          {journal} {date}\n        </List.Item>\n      ) : (\n        <List.Item>\n          <List.Header>Date</List.Header>\n          {date}\n        </List.Item>\n      )}\n      {source && (\n        <List.Item>\n          <List.Header>Source</List.Header>\n          {source}\n        </List.Item>\n      )}\n      {license && (\n        <List.Item>\n          <List.Header>License</List.Header>\n          {license}\n        </List.Item>\n      )}\n    </List>\n  );\n}\n\nfunction Content({\n  title,\n  abstract,\n  abstract_t5,\n  authors,\n  doi,\n  journal,\n  timestamp,\n  source,\n  license,\n}) {\n  return (\n    <ContainerContent>\n      <Header as=\"h1\">{title}</Header>\n      <Authors authors={authors} />\n      {abstract && (\n        <>\n          <Header as=\"h3\">Abstract</Header>\n          <p>{abstract}</p>\n          {abstract_t5 && (\n            <>\n              <Header as=\"h3\">Machine Generated Summary</Header>\n              <p>{abstract_t5}</p>\n            </>\n          )}\n        </>\n      )}\n      <Meta {...{ journal, timestamp, source, license, doi }} />\n    </ContainerContent>\n  );\n}\n\nfunction Related({ id }) {\n  const query = new URLSearchParams();\n  query.set('id', id);\n  query.set('searchChain', 'related-ann');\n  query.set('summary', 'short');\n  query.set('ranking.profile', 'related-ann');\n  query.set('use-abstract', true);\n  query.set('hits', 5);\n\n  const { loading, response, error } = Get(\n    '/search/?' + query.toString()\n  ).state();\n\n  if (loading) return <Loading message=\"Searching...\" />;\n  if (error)\n    return <Error message={error.message || 'Unknown search error...'} />;\n\n  console.log(response);\n  if (!('children' in response.root)) return null;\n  return (\n    <Tab.Pane>\n      <React.Fragment>\n        {response.root.children.map((article, i) => (\n          <ResultCard key={i} {...article} />\n        ))}\n        <Link to={`/search/?query=related_to:${id}`}>Show more</Link>\n      </React.Fragment>\n    </Tab.Pane>\n  );\n}\n\nfunction CitedBy({ citedBy, total, offset, onOffsetChange }) {\n  return (\n    <Container>\n      {citedBy.slice(offset, offset + 10).map(id => (\n        <Citation key={id} id={id} />\n      ))}\n      <Pagination {...{ total, offset, onOffsetChange }} />\n    </Container>\n  );\n}\n\nfunction Citation({ id }) {\n  const { loading, response, error } = Get(\n    `/document/v1/covid-19/doc/docid/${id}`\n  ).state();\n\n  if (loading) return <Loading message=\"Loading...\" />;\n  if (error)\n    return <Error message={error.message || `Failed to load article #${id}`} />;\n\n  console.log(response);\n  return <ResultCard {...response} />;\n}\n\nfunction Article({ id }) {\n  const url = new URL(window.location);\n  const { loading, response, error } = Get(\n    `/document/v1/covid-19/doc/docid/${id}`\n  ).state();\n\n  if (loading) return <Loading message=\"Loading...\" />;\n  if (error)\n    return <Error message={error.message || `Failed to load article #${id}`} />;\n\n  console.log(response);\n\n  const citations = uniq([\n    ...(response.fields.cited_by || []),\n    ...(response.fields.citations_inbound || [])\n      .map(c => c.source_id)\n      .filter(c => !isNaN(c)),\n  ]);\n\n  const panes = [\n    {\n      menuItem: 'Similar articles',\n      render: () => <Related id={response.fields.id} />,\n    },\n    {\n      menuItem: {\n        key: 'citations',\n        content: `${citations.length} citing articles`,\n        disabled: citations.length === 0,\n      },\n      render: () => (\n        <CitedBy\n          citedBy={citations}\n          offset={parseInt(url.searchParams.get('offset')) || 0}\n          total={citations.length}\n          onOffsetChange={offset => {\n            url.searchParams.set('offset', offset);\n            navigate(url);\n          }}\n        />\n      ),\n    },\n  ];\n\n  return (\n    <React.Fragment>\n      <ContainerContent>\n        <Content {...response.fields} />\n        <Tab\n          panes={panes}\n          defaultActiveIndex={url.searchParams.get('tab') || 0}\n          onTabChange={(e, tabInfo) => {\n            // Reset all query params when changing tab\n            [...url.searchParams.keys()].forEach(k =>\n              url.searchParams.delete(k)\n            );\n            url.searchParams.set('tab', tabInfo.activeIndex);\n            navigate(url);\n          }}\n        />\n      </ContainerContent>\n      <Footer />\n    </React.Fragment>\n  );\n}\n\nexport default Article;\n","import React from 'react';\nimport { Grid } from 'semantic-ui-react';\nimport styled from 'styled-components';\n\nconst Title = styled.h2`\n  font-weight: 400;\n  color: #3f9dd8;\n`;\n\nconst ErrorGrid = styled(Grid)`\n  height: 80vh;\n`;\n\nconst getMessage = code => {\n  switch (code) {\n    case 403:\n      return 'Sorry, you are not authorized to view this page.';\n    case 404:\n      return 'Sorry, the page you were looking for does not exist.';\n    case 500:\n      return 'Oops... something went wrong.';\n    default:\n      return 'Unknown error - really, I have no idea what is going on here.';\n  }\n};\n\nfunction Error({ code = 404 }) {\n  const message = getMessage(code);\n\n  return (\n    <ErrorGrid textAlign=\"center\" verticalAlign=\"middle\">\n      <Grid.Row>\n        <Grid.Column width={8}>\n          <Title>{message}</Title>\n        </Grid.Column>\n      </Grid.Row>\n    </ErrorGrid>\n  );\n}\n\nexport default Error;\n","import React from 'react';\nimport { Router } from '@reach/router';\nimport { Flex, Box } from 'rebass';\nimport NavMenu from 'App/shared/components/NavMenu';\nimport Main from './Main';\nimport Search from './Search';\nimport Article from './Article';\nimport Error from 'App/shared/components/Error';\n\nfunction App() {\n  return (\n    <Flex flexDirection=\"column\" minHeight=\"100vh\">\n      <Box width={1}>\n        <NavMenu />\n      </Box>\n      <Router primary={false} component={React.Fragment}>\n        <Main path=\"/\" />\n        <Search path=\"/search\" />\n        <Article path=\"/article/:id\" />\n        <Error default />\n      </Router>\n    </Flex>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'fomantic-ui-css/semantic.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nif (process.env.NODE_ENV !== 'production') {\n  const whyDidYouRender = require('@welldone-software/why-did-you-render');\n  whyDidYouRender(React);\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}